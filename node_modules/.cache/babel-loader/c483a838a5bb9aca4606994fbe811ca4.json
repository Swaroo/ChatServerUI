{"ast":null,"code":"var _jsxFileName = \"/app/src/login.js\";\nimport React from 'react';\nimport { render } from 'react-dom';\nimport axios from 'axios'; // axios seemed like a cool package to do api calls, alternative is fetch\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props); // data that user types in from login form\n\n    this.copyState = obj => {\n      return Object.assign({}, obj);\n    };\n\n    this.onNameChange = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.onPasswordChange = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.onSubmit = event => {\n      event.preventDefault(); // prevents page from reloading with username + password visible as url query\n      // log that username is visible from our state\n\n      console.log(\"Login form submitted\\n\");\n      console.log(\"username: \" + this.state.username);\n      console.log(\"password: \" + this.state.password); // call post with user data\n\n      axios.post(\"http://localhost:3000/login\", null, {\n        params: {\n          username: this.state.username,\n          password: this.state.password\n        },\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\"\n        }\n      }).then(response => {\n        console.log(response); // get JWT Token\n\n        var token = response[\"data\"][\"token\"]; // store token in state as {user: token}\n\n        var all_tokens = this.copyState(this.state.tokens);\n        all_tokens[this.state.username] = token;\n        this.setState({\n          tokens: all_tokens\n        });\n        console.log(this.state.tokens); //props.history.push(\"/login\");\n        //TODO: Redirect to messageboard\n\n        this.props.history.push('/board');\n      }, error => {\n        console.log(error);\n\n        if (error.response.status === 403) {\n          console.log(\"403\");\n          alert(\"Wrong password\");\n        }\n      });\n      /*\n      fetch('http://localhost:3000/login', {\n       method: 'POST',\n       body: 'username=aa&password=bb' \n      }).then(function(response) {\n       console.log(response);\n      });\n      */\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      tokens: {}\n    };\n  } // returns a deep copy of object\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Username\"), \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.username,\n      onChange: this.onNameChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Password\"), \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.password,\n      onChange: this.onPasswordChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Login\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/app/src/login.js"],"names":["React","render","axios","Login","Component","constructor","props","copyState","obj","Object","assign","onNameChange","event","setState","username","target","value","onPasswordChange","password","onSubmit","preventDefault","console","log","state","post","params","headers","then","response","token","all_tokens","tokens","history","push","error","status","alert"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { render } from 'react-dom'\nimport axios from 'axios'; // axios seemed like a cool package to do api calls, alternative is fetch\n\n\nclass Login extends React.Component {\n  constructor(props){\n    super(props);\n\n    // data that user types in from login form\n    this.state = {\n      username: '',\n      password: '',\n      tokens: {\n        \n      }\n    };\n\n  }\n\n  // returns a deep copy of object\n  copyState = (obj) => {\n    return Object.assign({}, obj);\n  }\n\n  // update username in state when keys are typed into login form\n  onNameChange = (event) =>{\n    this.setState({username: event.target.value})\n  }\n\n   // update password in state when keys are typed into login form\n  onPasswordChange = (event) =>{\n    this.setState({password: event.target.value})\n  }\n\n  // call post to server when user submits login form\n  onSubmit = (event) => {\n    event.preventDefault(); // prevents page from reloading with username + password visible as url query\n\n    // log that username is visible from our state\n    console.log(\"Login form submitted\\n\");\n    console.log(\"username: \" + this.state.username);\n    console.log(\"password: \" + this.state.password);\n\n   // call post with user data\n   axios.post( \"http://localhost:3000/login\", null, { \n      params: {\n        username: this.state.username,\n        password: this.state.password \n      }, \n      headers: { \"Access-Control-Allow-Origin\": \"*\", } \n    }).then((response) => {\n      console.log(response);\n\n      // get JWT Token\n      var token = response[\"data\"][\"token\"]\n\n      // store token in state as {user: token}\n      var all_tokens = this.copyState(this.state.tokens);\n      all_tokens[this.state.username] = token\n      this.setState({tokens: all_tokens})\n      console.log(this.state.tokens);\n      //props.history.push(\"/login\");\n      //TODO: Redirect to messageboard\n      this.props.history.push('/board')\n\n    }, (error) => {\n      console.log(error);\n      if (error.response.status === 403){\n        console.log(\"403\");\n        alert(\"Wrong password\");\n      }\n\n    });\n\n\n    \n   /*\n   fetch('http://localhost:3000/login', {\n    method: 'POST',\n    body: 'username=aa&password=bb' \n  }).then(function(response) {\n    console.log(response);\n  });\n  */\n  \n\n   \n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<form onSubmit={this.onSubmit}>\n          <h1>Login</h1>\n\n          <label> <b>Username</b> </label>\n          <input type=\"text\" value={this.state.username} onChange={this.onNameChange} required/>\n          <br></br>\n          <label> <b>Password</b> </label>\n          <input type=\"text\" value={this.state.password} onChange={this.onPasswordChange} required/>\n          <br></br>\n          <button type=\"submit\" className=\"btn\">Login</button>\n        </form>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}