{"ast":null,"code":"var _jsxFileName = \"/app/src/board.js\";\nimport React from 'react';\nimport { render } from 'react-dom';\nimport axios from 'axios'; // axios seemed like a cool package to do api calls, alternative is fetch\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props); // data that user types in from login form\n\n    this.onMessageChange = event => {\n      console.log(\"a\");\n      this.setState({\n        out_message: event.target.value\n      });\n\n      if (event.target.value === 'Enter') {\n        console.log(\"You typed enter!\\n\");\n      }\n    };\n\n    this.onKeyDown = ele => {\n      if (ele.keyCode === 13) {\n        var cur_message = this.state.out_message;\n        console.log(\"enter pressed!\");\n        console.log(\"sending this message to server: \" + cur_message);\n        console.log(\"with this token: \" + this.state.token);\n        this.setState({\n          out_message: ''\n        });\n        axios.post(\"http://localhost:3000/message\", null, {\n          params: {\n            message: cur_message\n          },\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            Authorization: \"Bearer \".concat(this.state.token)\n          }\n        }).then(response => {\n          console.log(response);\n        }, error => {\n          console.log(error);\n\n          if (error.response.status === 403) {\n            console.log(\"403: Token not valid\");\n          }\n        });\n      }\n    };\n\n    this.onTextChange = event => {\n      // DUMMY\n      this.setState({\n        out_message: event.target.value\n      });\n    };\n\n    this.state = {\n      board_data: 'This is default data on board',\n      out_message: '',\n      columns: \"this is a column\",\n      token: ''\n    };\n  } // update username in state when keys are typed into login form\n\n\n  componentDidMount() {\n    var old_state = this.props.location.state;\n    console.log(\"old state: \");\n    console.log(old_state);\n    console.log(\"old token: \" + old_state.token);\n    this.setState({\n      token: old_state.token\n    });\n    var eventSource = new EventSource(\"http://localhost:3000/stream/\" + old_state.token);\n    eventSource.addEventListener(\"message\", function (event) {\n      debugger;\n      console.log(event.data);\n      var msg = JSON.parse(event.data);\n      var board_data = document.getElementById('board').value;\n      document.getElementById('board').value = board_data + \"</br>\" + msg[\"name\"] + \" : \" + msg[\"msg\"];\n    }, false);\n  } //<ReactTable data={this.state.board_data} columns={this.state.columns} />\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      align: \"center\",\n      style: {\n        color: 'green'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \" CS 291 Class\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      id: \"board\",\n      style: {\n        height: '850px',\n        width: '70%',\n        overflow: 'scroll'\n      },\n      value: \"Hello!\",\n      onChange: this.onTextChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        float: 'right',\n        height: '850px',\n        width: '28%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Online\"))), React.createElement(\"tbody\", {\n      style: {\n        fontWeight: 'light'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Jill\")), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Eve\")))))), React.createElement(\"input\", {\n      style: {\n        height: '30px',\n        width: '100%'\n      },\n      type: \"text\",\n      value: this.state.out_message,\n      onChange: this.onMessageChange,\n      onKeyDown: this.onKeyDown,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }));\n  }\n\n} //<input style={{height: '30px', width:'100%'}} type=\"text\" value={this.state.message} onChange={this.onMessageChange} required/>\n\n\nexport default Board;","map":{"version":3,"sources":["/app/src/board.js"],"names":["React","render","axios","Board","Component","constructor","props","onMessageChange","event","console","log","setState","out_message","target","value","onKeyDown","ele","keyCode","cur_message","state","token","post","params","message","headers","Authorization","then","response","error","status","onTextChange","board_data","columns","componentDidMount","old_state","location","eventSource","EventSource","addEventListener","data","msg","JSON","parse","document","getElementById","color","height","width","overflow","float","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { render } from 'react-dom'\nimport axios from 'axios'; // axios seemed like a cool package to do api calls, alternative is fetch\n\n\nclass Board extends React.Component {\n  constructor(props){\n    super(props);\n    \n    // data that user types in from login form\n    this.state = {\n      board_data: 'This is default data on board',\n      out_message: '',\n      columns: \"this is a column\",\n      token: ''\n    };\n\n    \n  }\n  // update username in state when keys are typed into login form\n  onMessageChange = (event) =>{\n    console.log(\"a\");\n    this.setState({out_message: event.target.value})\n    if (event.target.value === 'Enter'){\n      console.log(\"You typed enter!\\n\");\n    }\n  }\n\n  onKeyDown = (ele) =>{\n    if (ele.keyCode === 13){\n      var cur_message = this.state.out_message;\n      console.log(\"enter pressed!\");\n      console.log(\"sending this message to server: \" + cur_message);\n      console.log(\"with this token: \" + this.state.token);\n\n      this.setState({out_message: ''});\n\n      axios.post( \"http://localhost:3000/message\", null, { \n      params: {\n        message: cur_message\n      }, \n      headers: { \n        \"Access-Control-Allow-Origin\": \"*\", \n        Authorization: `Bearer ${this.state.token}`\n      } \n    }).then((response) => {\n      console.log(response);\n\n    }, (error) => {\n      console.log(error);\n      if (error.response.status === 403){\n        console.log(\"403: Token not valid\");\n      }\n\n    });\n\n    }\n  }\n\n  onTextChange = (event) =>{\n    // DUMMY\n    this.setState({out_message: event.target.value})\n  }\n\n  componentDidMount() {\n    var old_state = this.props.location.state;\n    console.log(\"old state: \");\n    console.log(old_state);\n    console.log(\"old token: \" + old_state.token);\n\n    this.setState({token: old_state.token});\n    var eventSource = new EventSource(\"http://localhost:3000/stream/\"+old_state.token);\n\n    eventSource.addEventListener(\n      \"message\",\n        function(event) {\n          debugger;\n            console.log(event.data);\n            var msg = JSON.parse(event.data);\n            var board_data = document.getElementById('board').value;\n            document.getElementById('board').value = board_data + \"</br>\" + msg[\"name\"]+ \" : \" + msg[\"msg\"];\n        },\n        false\n    );\n\n\n\n    \n  }\n\n  //<ReactTable data={this.state.board_data} columns={this.state.columns} />\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div>\n        <h1 align=\"center\" style={{color:'green'}}> CS 291 Class</h1>\n        <span>\n        <textarea id = \"board\" style={{height:'850px',  width:'70%', overflow:'scroll'}} value=\"Hello!\" onChange={this.onTextChange}></textarea>\n        \n\n\t\t\t\t<div style={{float:'right', height: '850px', width:'28%'}}>\n          <table>\n            <thead style={{fontWeight:'bold'}}>\n              <tr>\n                <th>Online</th>\n              </tr>\n            </thead>\n            <tbody style={{fontWeight:'light'}}>\n              <tr>\n                <th>Jill</th>\n              </tr>\n              <tr>\n                <th>Eve</th>\n              </tr>\n            </tbody>\n            \n          </table>\n        </div>\n\n        </span>\n\n        <input style={{height: '30px', width:'100%'}} type=\"text\" value={this.state.out_message} onChange={this.onMessageChange} onKeyDown={this.onKeyDown} required/>\n\n      </div>\n    )\n  }\n}\n//<input style={{height: '30px', width:'100%'}} type=\"text\" value={this.state.message} onChange={this.onMessageChange} required/>\nexport default Board"]},"metadata":{},"sourceType":"module"}